!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ts-md5/dist/md5")):"function"==typeof define&&define.amd?define("ngx-gravatar",["exports","@angular/core","ts-md5/dist/md5"],e):e((t=t||self)["ngx-gravatar"]={},t.ng.core,t.md5)}(this,function(t,e,r){"use strict";var i=function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=new e.InjectionToken("gravatarCustom.config"),n={blank:"blank",identicon:"identicon",mm:"mm",mp:"mp",monsterid:"monsterid",retro:"retro",robohash:"robohash",wavatar:"wavatar"},o={g:"g",pg:"pg",r:"r",x:"x"},s={fallback:n.retro,size:40,cornerRadius:0,preferGravatar:!1,hasBorder:!1,borderColor:"#000000",borderRadius:"50%",borderStyle:"solid",borderWidth:1,round:!0,backgroundColor:"transparent",rating:o.g,ratio:2},d=function(){function t(t){this.gravatarConfig=t,this.defaultConfig=i({},s),this.gravatarConfig&&(this.gravatarConfig.rating=this.determineRating(this.gravatarConfig.rating),this.gravatarConfig.fallback=this.determineFallback(this.gravatarConfig.fallback),this.defaultConfig=i({},this.defaultConfig,this.gravatarConfig))}return t.prototype.getDefaultConfig=function(){return this.defaultConfig},t.prototype.generateGravatarUrl=function(t,e,i,a,n){var o;if(e)o=e;else{try{t=t.trim().toLowerCase()}catch(s){console.error("[ngx-gravatar] - Email ("+t+") is not a string. Empty string is used as a default email."),t=""}o=r.Md5.hashStr(t)}return"https://www.gravatar.com/avatar/"+o+"?s="+(i=i||this.defaultConfig.size)+"&r="+(a=this.determineRating(a,this.defaultConfig.rating))+"&d="+(n=this.determineFallback(n,this.defaultConfig.fallback))},t.prototype.determineFallback=function(t,e){return void 0===e&&(e=s.fallback),t===undefined?e:n[t]===undefined?(console.error('[ngx-gravatar] - "'+t+'" is invalid gravatar fallback type. Default fallback "'+e+'" is used.'),e):t},t.prototype.determineRating=function(t,e){return void 0===e&&(e=s.rating),t===undefined?e:o[t]===undefined?(console.error('[ngx-gravatar] - "'+t+'" is invalid gravatar rating type. Default rating "'+e+'" is used.'),e):t},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Optional},{type:e.Inject,args:[a]}]}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(a,8))},token:t,providedIn:"root"}),t}(),u=function(){function t(t,e,r){var i=this;this.elementRef=t,this.renderer=e,this.gravatarService=r,this.style={},this.initialized=!1,this.defaultConfig=this.gravatarService.getDefaultConfig(),this.renderer.listen(this.elementRef.nativeElement,"error",function(t){i.isGravatarUsed||i.initializeAvatar(!0)})}return t.prototype.ngOnInit=function(){this.initializeAvatar(),this.initialized=!0,this.isGravatarUsed=!1},t.prototype.ngOnChanges=function(){this.initialized&&this.initializeAvatar()},t.prototype.setDefaultValues=function(){this.size=this.computeSize(),this.ratio=this.ratio===undefined?this.defaultConfig.ratio:this.ratio,this.requestedSize=this.size*this.ratio,this.round=this.round===undefined?this.defaultConfig.round:this.round,this.cornerRadius=this.cornerRadius===undefined?this.defaultConfig.cornerRadius:this.cornerRadius,this.preferGravatar=this.preferGravatar===undefined?this.defaultConfig.preferGravatar:this.preferGravatar},t.prototype.initializeAvatar=function(t){this.setDefaultValues();var e="";this.preferGravatar||t?(e=this.gravatarService.generateGravatarUrl(this.email,this.md5Hash,this.requestedSize,this.rating,this.fallback),this.isGravatarUsed=!0):this.src?e=this.src:(e=this.gravatarService.generateGravatarUrl(this.email,this.md5Hash,this.requestedSize,this.rating,this.fallback),this.isGravatarUsed=!0),this.renderer.setProperty(this.elementRef.nativeElement,"src",e),this.setStyle(this.avatarStyle())},t.prototype.computeSize=function(){var t=this.size===undefined?this.defaultConfig.size:this.size;if(this.style&&this.style.width)try{var e=this.style.width.trim();e.match(/^\d+px$/)&&(t=e.replace("px",""))}catch(r){return t}return t},t.prototype.avatarStyle=function(){var t={width:this.size+"px",height:this.size+"px",borderRadius:this.round?this.defaultConfig.borderRadius:this.cornerRadius+"px",borderStyle:this.defaultConfig.hasBorder||this.borderColor||this.borderWidth?this.defaultConfig.borderStyle:"none",borderColor:this.borderColor?this.borderColor:this.defaultConfig.borderColor,borderWidth:this.borderWidth?this.borderWidth+"px":this.defaultConfig.borderWidth+"px",backgroundColor:this.backgroundColor?this.backgroundColor:this.defaultConfig.backgroundColor};return i({},t,this.style)},t.prototype.setStyle=function(t){var e=this;Object.keys(t).forEach(function(r){e.renderer.setStyle(e.elementRef.nativeElement,r,t[r])})},t.decorators=[{type:e.Directive,args:[{selector:"[ngx-gravatar], [ngxGravatar]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:d}]},t.propDecorators={src:[{type:e.Input}],email:[{type:e.Input}],md5Hash:[{type:e.Input}],size:[{type:e.Input}],fallback:[{type:e.Input}],rating:[{type:e.Input}],round:[{type:e.Input}],cornerRadius:[{type:e.Input}],borderColor:[{type:e.Input}],borderWidth:[{type:e.Input}],style:[{type:e.Input}],preferGravatar:[{type:e.Input}],backgroundColor:[{type:e.Input}],ratio:[{type:e.Input}]},t}(),h=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:a,useValue:e}]}},t.decorators=[{type:e.NgModule,args:[{declarations:[u],exports:[u]}]}],t}();t.FALLBACK=n,t.GravatarModule=h,t.RATING=o,t.ɵa=u,t.ɵb=d,t.ɵc=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-gravatar.umd.min.js.map